---
description: Guidelines for maintaining project context documentation in .cursor/context/
globs: .cursor/context/**/*.md
alwaysApply: false
---

# Project Context Documentation

Detailed project context files live in `.cursor/context/` to provide comprehensive information without bloating the main `context.md`.

## File Structure

```
.cursor/context/
  architecture.md    # System architecture, data flows, layer responsibilities
  data-models.md     # Database schema, entity relationships, migrations
  user-journeys.md   # User flows, interaction paths, role-based access
  features.md        # Feature details with flows and key files
  api.md             # API routes, endpoints, request/response contracts
  integrations.md    # Third-party services (Stripe, email, analytics)
  security.md        # Auth flows, permissions, security model
```

## When to Update

| File | Update When |
|------|-------------|
| `architecture.md` | Adding new layers, changing data flow patterns |
| `data-models.md` | Adding/modifying database tables, new migrations |
| `user-journeys.md` | Adding user-facing features, changing flows |
| `features.md` | Implementing new features, major feature changes |
| `api.md` | Adding tRPC routes, new API endpoints |
| `integrations.md` | Adding third-party services, changing integration patterns |
| `security.md` | Changing auth, adding roles, modifying permissions |

## Documentation Standards

### Use ASCII Diagrams
```
┌─────────┐     ┌─────────┐
│ Client  │────▶│ Server  │
└─────────┘     └─────────┘
```

### Include Key Files
Always list relevant files:
```markdown
**Key files:**
- `app/routes/admin/users.tsx` - User management page
- `app/trpc/routes/admin.ts` - Admin tRPC routes
```

### Flow Documentation
Document flows with:
1. ASCII diagram showing the flow
2. Code example if helpful
3. Key files involved

### Keep Synced with Code
When implementing features:
1. Update relevant context file(s)
2. Add to `context.md` compressed index if new
3. Ensure key files are listed correctly

## Relationship to context.md

`context.md` contains a **compressed index** pointing to these files:
```
[Context Docs]|root: .cursor/context/
|architecture.md: System layers, data flows, key files
|data-models.md: Entity diagrams, table schemas, migrations
...
```

The main context.md stays small (~100 lines) while these files provide depth.
